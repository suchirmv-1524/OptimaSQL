<h1 align="center">Backend</h1>

This is the backend of our SQL Query Optimiser 

## Installation and setup

1. Ensure that you have [Poetry](https://python-poetry.org/docs/) (A package manager for Python) and at minimum [Python 3.8](https://www.python.org/downloads/) installed. You can run `pip install poetry` in your environment to install Poetry.
2. `cd` into this folder and run `poetry install` to install the Python package dependencies for this backend. We are using Flask as a web server.
3. By default, the backend server starts in production mode. To run in development mode and enable hot reloading, create an `.env` file in this folder and add the following environment variables:

```bash
FLASK_APP=app.py
FLASK_ENV=development
DB_HOST=localhost     
DB_NAME=tpc_h      
DB_USER=postgres   
DB_PASSWORD=postgres  
DB_PORT=5432      
```
This will ensure that the connection details of your PostgreSQL database is saved

4. You will have to connect to a Postgresql database to run the query. This database should be populated with dummy data generated by [TPC-H](http://www.tpc.org/tpch/). See the [main README](https://github.com/daedalus15/OptimaSQL) if you have not generated the TPC-H dataset.

5. It is recommended that you use this exact configuration for the PostgreSQL database (aka with a database named "TPC_H").

6. To start the backend server, you can run `poetry run flask run` from this folder, or head back up to the `root` folder and run `yarn start`, which starts both the frontend client and the backend server concurrently.
